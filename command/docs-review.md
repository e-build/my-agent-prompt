---
description: Critical and constructive review of existing documentation with detailed feedback and fix guidance
agent: doc-manager
---

# 문서 검토

**검토 대상**: $ARGUMENTS

---

## 진행 상태 확인

**대상 디렉토리**: $ARGUMENTS의 부모 디렉토리

1. **진행 파일 확인**:
   - 대상이 파일인 경우: 파일이 위치한 디렉토리에서 `.docs-review-progress.md` 검색
   - 대상이 디렉토리인 경우: 해당 디렉토리에서 `.docs-review-progress.md` 검색

2. **진행 파일 발견 시**:
   ```
   ⚠️  발견: 진행 중인 문서 검토 작업
   
   대상: {target}
   시작: {started} ({elapsed-time} 전)
   진행: Phase {current}/6 ({percentage}%)
   마지막 업데이트: {last_updated}
   
   완료된 단계:
   {list-of-completed-phases}
   
   선택:
   1. 이어서 진행 (Phase {current}부터)
   2. 처음부터 다시 시작 (기존 진행 파일 삭제)
   3. 취소
   ```
   
   **사용자 선택 대기**:
   - 선택 1: 진행 파일 읽고 해당 Phase로 점프
   - 선택 2: 진행 파일 삭제하고 Phase 0부터 시작
   - 선택 3: 명령 종료

3. **진행 파일 없음**: Phase 0부터 시작

---

## 검토 원칙

- **비판적**: 문제점 명확히 지적
- **건설적**: 구체적 개선 방안 제시
- **객관적**: 규칙 기반 평가
- **상세함**: 모호한 평가 금지, 구체적 예시 필수

---

## 검토 기준 (규칙)

@~/.config/opencode/refs/docs-rules.md

---

## 실행 절차

### Phase 0: 진행 추적 초기화

**목적**: 검토 진행 상태를 추적할 파일 생성

1. **대상 경로 결정**:
   - 입력이 파일: 파일의 부모 디렉토리
   - 입력이 디렉토리: 해당 디렉토리
   - 진행 파일 경로: `{target-dir}/.docs-review-progress.md`

2. **진행 파일 생성**:
   ```markdown
   ---
   command: docs-review
   target: {full-path-to-target}
   started: {ISO-8601-timestamp}
   phase: 1
   total_phases: 6
   last_updated: {ISO-8601-timestamp}
   ---
   
   ## 진행 상태
   
   현재 Phase: 1/6
   전체 진행률: 0%
   
   ## 완료된 단계
   
   (없음)
   
   ## 진행 중
   
   - [ ] Phase 1: 문서 분석
   
   ## 대기 중
   
   - [ ] Phase 2: 체크리스트 평가
   - [ ] Phase 3: 등급 산정
   - [ ] Phase 4: 상세 피드백 작성
   - [ ] Phase 5: 수정 가이드 제공
   - [ ] Phase 6: 수정 완료 후 재검토
   
   ## 중간 결과
   
   (Phase 완료 시 추가됨)
   ```

3. **확인 메시지**:
   ```
   ✓ 진행 추적 시작: {progress-file-path}
   ```

---

### Phase 1: 문서 분석

#### 1-1. 기본 정보 수집
```
파일 경로: {전체 경로}
파일명: {파일명}
분류: learning / design
위치: docs/{feature}/
라인 수: {총 라인}
작성일: {git log 기반}
최근 수정: {git log 기반}
```

#### 1-2. 구조 분석
- 목차 존재 여부 및 위치
- H1, H2, H3 구조 파악
- 섹션 간 논리적 흐름
- 링크 (내부/외부) 확인

#### 1-3. 내용 분석
- learning/: 출처 유무, 범용성
- design/: 추상화 수준, 다이어그램
- 코드 예시 품질
- 용어 일관성

#### 1-4. Phase 1 완료 - 진행 상태 업데이트

**진행 파일 업데이트**:

1. **중간 결과 저장**:
   ```markdown
   ### Phase 1 결과
   
   **기본 정보**:
   - 파일 경로: {path}
   - 분류: {learning|design}
   - 라인 수: {lines}
   - 작성일: {date}
   
   **구조 분석**:
   - 목차: {있음|없음}
   - H1/H2/H3 개수: {counts}
   - 링크 개수: {internal}/{external}
   
   **내용 분석**:
   - 출처 개수: {count}
   - 코드 예시: {count}
   - 다이어그램: {count}
   ```

2. **진행 상태 업데이트**:
   - `phase: 2`
   - `last_updated: {timestamp}`
   - 진행률: 17% (1/6 완료)
   - 완료 목록에 Phase 1 추가

3. **파일 저장**: `.docs-review-progress.md` 업데이트

---

### Phase 2: 체크리스트 평가 (상세)

#### 1. 구조 검토

**목차**
- [ ] 존재 (H1 바로 아래)
- [ ] 모든 H2 포함
- [ ] 앵커 링크 정상 작동
- [ ] 섹션 순서 논리적

**세부 평가**:
```
목차 항목 수: X개
누락된 섹션: [섹션명]
잘못된 앵커: [링크]
```

**파일명**
- [ ] 소문자
- [ ] 하이픈 구분
- [ ] 의미 명확

**세부 평가**:
```
현재 파일명: {현재}
규칙 위반: [구체적 위반 사항]
제안 파일명: {제안}
```

**분류**
- [ ] learning/ vs design/ 적절
- [ ] 범용 개념이 design/에 없음
- [ ] 프로젝트 특화가 learning/에 없음

**세부 평가**:
```
현재 분류: learning / design
적절성: 적절 / 부적절
부적절한 경우 이유: [구체적 이유]
제안 분류: {제안}
```

**index.md 연결**
- [ ] index.md에 링크됨
- [ ] 적절한 Phase에 배치
- [ ] 설명 포함

---

#### 2. 정확성 검토

**출처 (learning/)**
- [ ] 모든 주요 개념에 출처
- [ ] 출처 URL 유효
- [ ] 출처 신뢰성 (공식문서/논문)

**세부 평가**:
```
출처 개수: X개
유효한 출처: X개
깨진 링크: [URL]
출처 없는 개념: [개념명]

각 출처 평가:
1. [개념] - 출처: [URL]
   신뢰성: 높음/중간/낮음
   이유: [구체적 평가]
```

**기술 정확성**
- [ ] 개념 설명 정확
- [ ] 코드 예시 동작
- [ ] 최신 정보 (deprecated 없음)

**세부 평가**:
```
부정확한 내용:
- 위치: [라인 번호 또는 섹션]
- 내용: [부정확한 내용]
- 이유: [왜 부정확한지]
- 올바른 내용: [정확한 내용]
```

**코드-문서 일치**
- [ ] 코드 예시가 실제 코드와 일치
- [ ] 설명이 현재 구현과 일치

**세부 평가**:
```
불일치 발견:
- 문서 내용: [문서에 쓰인 내용]
- 실제 코드: [코드 경로 및 내용]
- 불일치 이유: [변경 사항]
```

---

#### 3. 완성도 검토

**범위**
- [ ] 핵심 개념 모두 다룸
- [ ] 적절한 깊이

**세부 평가**:
```
다루는 개념: [개념 목록]
누락된 개념: [개념명 + 왜 중요한지]
불필요하게 깊은 부분: [섹션명]
너무 얕은 부분: [섹션명]
```

**예시**
- [ ] 필요한 곳에 예시
- [ ] 예시가 이해하기 쉬움
- [ ] 예시가 실제로 동작

**세부 평가**:
```
전체 예시 수: X개
좋은 예시: [위치] - [이유]
부족한 예시: [위치] - [무엇이 부족한지]
예시 필요 위치: [섹션] - [어떤 예시]
```

**다이어그램**
- [ ] 복잡한 개념에 다이어그램
- [ ] 다이어그램이 명확
- [ ] Mermaid 형식 정상

**세부 평가**:
```
전체 다이어그램 수: X개
다이어그램 평가:
- [위치]: 명확함/불명확함 - [이유]
다이어그램 필요 위치: [섹션] - [어떤 다이어그램]
```

---

#### 4. 가치 검토

**유용성**
- [ ] 실제로 도움됨
- [ ] 독자가 명확
- [ ] 활용 시나리오 존재

**세부 평가**:
```
예상 독자: [누가 읽을까]
유용한 이유: [구체적 이유]
활용 시나리오:
- 시나리오 1: [구체적 상황]
- 시나리오 2: [구체적 상황]
```

**중복**
- [ ] 다른 문서와 중복 없음

**세부 평가**:
```
중복 발견:
- 중복 문서: [경로]
- 중복 내용: [구체적 내용]
- 제안: 통합 / 링크 / 삭제
```

#### Phase 2 완료 - 진행 상태 업데이트

**진행 파일 업데이트**:

1. **중간 결과 저장**:
   ```markdown
   ### Phase 2 결과
   
   **체크리스트 평가 완료**:
   - 구조 검토: {통과/실패 개수}
   - 정확성 검토: {통과/실패 개수}
   - 완성도 검토: {통과/실패 개수}
   - 가치 검토: {통과/실패 개수}
   
   **주요 발견**:
   - 긍정: {요약}
   - 부정: {요약}
   ```

2. **진행 상태 업데이트**:
   - `phase: 3`
   - `last_updated: {timestamp}`
   - 진행률: 33% (2/6 완료)
   - 완료 목록에 Phase 2 추가

---

### Phase 3: 등급 산정 (근거 포함)

```
| 항목 | 평가 | 근거 |
|------|------|------|
| 전체 등급 | A/B/C/D/F | [구체적 근거] |
| 구조 | 5점 | [채점 이유] |
| 정확성 | 4점 | [채점 이유] |
| 완성도 | 3점 | [채점 이유] |
| 가치 | 5점 | [채점 이유] |
```

**등급 기준**:
| 등급 | 기준 |
|------|------|
| A | 규칙 완벽 준수, 내용 정확, 매우 유용 |
| B | 대부분 준수, 사소한 개선점 |
| C | 일부 미준수, 내용 보완 필요 |
| D | 다수 미준수, 상당한 수정 필요 |
| F | 대부분 미준수, 전면 재작성 권장 |

#### Phase 3 완료 - 진행 상태 업데이트

**진행 파일 업데이트**:

1. **중간 결과 저장**:
   ```markdown
   ### Phase 3 결과
   
   **등급 산정 완료**:
   - 전체 등급: {A/B/C/D/F}
   - 구조: {점수}/5
   - 정확성: {점수}/5
   - 완성도: {점수}/5
   - 가치: {점수}/5
   - 평균: {점수}/5.0
   ```

2. **진행 상태 업데이트**:
   - `phase: 4`
   - `last_updated: {timestamp}`
   - 진행률: 50% (3/6 완료)
   - 완료 목록에 Phase 3 추가

---

### Phase 4: 상세 피드백 작성

#### 강점 (구체적 예시 포함)

```
1. [강점 1]
   예시: [구체적 위치 및 내용]
   왜 좋은가: [이유]

2. [강점 2]
   예시: [구체적 위치 및 내용]
   왜 좋은가: [이유]
```

#### 개선점 (우선순위별, 구체적)

**높음 (즉시 수정)**
```
1. [문제점 제목]
   
   위치: [파일:라인번호 또는 섹션명]
   
   현재 상태:
   ---
   [실제 문서 내용 인용]
   ---
   
   문제:
   - [왜 문제인지 구체적 설명]
   - [어떤 규칙 위반인지]
   - [독자에게 어떤 영향인지]
   
   수정 방안:
   ---
   [구체적으로 수정된 내용]
   ---
   
   예상 효과:
   - [이렇게 수정하면 어떤 개선이 있는지]
```

**중간 (개선 권장)**
```
1. [문제점 제목]
   
   위치: [위치]
   현재: [간략히]
   제안: [구체적 개선안]
   이유: [왜 개선이 필요한지]
```

**낮음 (시간 있을 때)**
```
1. [문제점]
   제안: [간략한 제안]
```

#### Phase 4 완료 - 진행 상태 업데이트

**진행 파일 업데이트**:

1. **중간 결과 저장**:
   ```markdown
   ### Phase 4 결과
   
   **피드백 작성 완료**:
   - 강점: {개수}개
   - 개선점 (높음): {개수}개
   - 개선점 (중간): {개수}개
   - 개선점 (낮음): {개수}개
   ```

2. **진행 상태 업데이트**:
   - `phase: 5`
   - `last_updated: {timestamp}`
   - 진행률: 67% (4/6 완료)
   - 완료 목록에 Phase 4 추가

---

### Phase 5: 수정 가이드 제공

#### 즉시 적용 가능한 수정

각 우선순위 높음 항목에 대해:

```
수정 #1: [문제점 제목]

파일: [전체 경로]
위치: [라인 번호 또는 섹션명]

Before:
---
[현재 내용 (최소 5줄 컨텍스트)]
---

After:
---
[수정된 내용 (최소 5줄 컨텍스트)]
---

적용 방법:
1. 파일 열기: [경로]
2. [라인 번호] 찾기
3. 위 내용으로 교체
4. 저장

검증:
- [ ] 목차 링크 정상 작동
- [ ] 관련 섹션과 일관성
```

#### Phase 5-1. 진행 상태 업데이트 (Question 전)

**진행 파일 업데이트**:

1. **중간 결과 저장**:
   ```markdown
   ### Phase 5 결과
   
   **수정 가이드 생성 완료**:
   - 즉시 적용 가능한 수정: {개수}개
   - 수정 단계 정의됨
   ```

2. **진행 상태 업데이트**:
   - `phase: 5`
   - `last_updated: {timestamp}`
   - 진행률: 83% (5/6 완료)
   - 완료 목록에 Phase 5 추가

---

#### Phase 5-2. 사용자 결정 대기

검토 결과 확인 후 question 도구 사용:

```
question: "검토 결과를 확인했습니다. 어떻게 진행하시겠습니까?"

선택지:
1. 즉시 수정 시작 (우선순위 높음부터)
   → 각 수정 항목 확인 후 적용
   
2. 일부만 선택해서 수정
   → 수정할 항목 번호 입력받기
   
3. 수정 계획만 저장 (나중에)
   → [feature]/review-notes.md 생성
   
4. 추가 검토 필요
   → 구체적으로 어떤 부분인지 확인

5. 검토만 완료 (수정 안 함)
   → 진행 파일 정리하고 종료
```

**선택지 5 선택 시**:
1. 진행 파일 이름 변경: `.docs-review-progress.md` → `.docs-review-result.md`
2. 최종 상태 업데이트:
   ```markdown
   ---
   command: docs-review
   target: {target}
   started: {started}
   completed: {timestamp}
   status: completed-no-fixes
   ---
   
   ## 검토 완료
   
   전체 진행률: 100%
   등급: {grade}
   
   ## 요약
   {summary-of-review}
   ```
3. 완료 메시지:
   ```
   ✓ 문서 검토 완료
   
   결과 파일: {path}/.docs-review-result.md
   등급: {grade}
   
   수정을 원하시면 다시 /docs-review 실행하세요.
   ```
4. **명령 종료**

**선택지 1 선택 시**:

각 수정 항목에 대해 순차적으로:

```
question: "수정 #1: [문제점] - 이 수정을 적용하시겠습니까?"

선택지:
1. 적용 (자동으로 Edit 도구 사용)
2. 수정 내용 조정 (내용 보고 직접 수정)
3. 건너뛰기
4. 중단
```

적용 시:
- Edit 도구로 자동 적용
- 적용 후 해당 섹션 다시 읽어서 검증
- 문제 없으면 다음 항목

**선택지 2 선택 시**:

```
question: "수정할 항목 번호를 선택하세요 (쉼표로 구분)"

입력: 1,3,5

→ 선택된 항목만 순차 적용 (선택지 1과 동일)
```

**선택지 3 선택 시**:

```
docs/{feature}/review-notes.md 생성:

# 문서 검토 노트
검토일: {날짜}
검토자: AI Agent
등급: {등급}

## 우선순위 높음
1. [수정 항목]
   - 파일: [경로]
   - 내용: [요약]

## 우선순위 중간
...

## 우선순위 낮음
...
```

---

### Phase 6: 수정 완료 후 재검토

모든 수정 완료 후:

```
question: "수정이 완료되었습니다. 재검토를 진행하시겠습니까?"

선택지:
1. 예 (수정된 문서 다시 검토)
2. 아니오 (완료)
```

재검토 시:
- 동일한 검토 절차 수행
- 이전 등급과 비교
- 개선 정도 측정

```
재검토 결과:

이전 등급: C (3.2/5.0)
현재 등급: B (4.1/5.0)
개선도: +0.9점 (28% 개선)

개선된 항목:
- 구조: 3점 → 5점 (목차 추가)
- 정확성: 4점 → 5점 (출처 보강)

남은 개선점:
- 완성도: 3점 (예시 부족)
```

#### Phase 6 완료 - 최종 정리

**선택지 1 (재검토 진행) 선택 시**:

1. **재검토 완료 후 진행 파일 업데이트**:
   ```markdown
   ### Phase 6 결과
   
   **재검토 완료**:
   - 이전 등급: {grade}
   - 현재 등급: {grade}
   - 개선도: {improvement}
   ```

2. **진행 파일 정리**:
   - 이름 변경: `.docs-review-progress.md` → `.docs-review-result.md`
   - 최종 상태 업데이트:
     ```markdown
     ---
     command: docs-review
     target: {target}
     started: {started}
     completed: {timestamp}
     status: completed-with-fixes
     ---
     
     ## 검토 및 수정 완료
     
     전체 진행률: 100%
     
     ## 등급 변화
     - 이전: {before-grade}
     - 이후: {after-grade}
     - 개선: {improvement}
     
     ## 적용된 수정
     {list-of-applied-fixes}
     ```

3. **완료 메시지**:
   ```
   ✓ 문서 검토 및 수정 완료
   
   결과 파일: {path}/.docs-review-result.md
   등급: {before} → {after} ({improvement})
   ```

**선택지 2 (재검토 안 함) 선택 시**:

1. **진행 파일 정리**:
   - 이름 변경: `.docs-review-progress.md` → `.docs-review-result.md`
   - 최종 상태 업데이트:
     ```markdown
     ---
     command: docs-review
     target: {target}
     started: {started}
     completed: {timestamp}
     status: completed-with-fixes-no-recheck
     ---
     
     ## 검토 및 수정 완료 (재검토 생략)
     
     전체 진행률: 100%
     등급: {grade}
     
     ## 적용된 수정
     {list-of-applied-fixes}
     ```

2. **완료 메시지**:
   ```
   ✓ 문서 수정 완료 (재검토 생략)
   
   결과 파일: {path}/.docs-review-result.md
   ```

---

## 출력 형식

### 전체 요약

```
================================
문서 검토 결과
================================

파일: [경로]
검토일: [날짜]
등급: [A/B/C/D/F]

점수 상세:
- 구조: ★★★★★ (5/5)
- 정확성: ★★★★☆ (4/5)
- 완성도: ★★★☆☆ (3/5)
- 가치: ★★★★★ (5/5)
평균: 4.25/5.0

한줄 평가: [구체적 평가]
```

### 상세 피드백

```
================================
강점 (3개)
================================

1. [강점 제목]
   위치: [위치]
   내용: [구체적 예시]
   평가: [왜 좋은지]

================================
개선점 (우선순위별)
================================

[높음] 즉시 수정 필요 (2개)
[중간] 개선 권장 (3개)
[낮음] 시간 있을 때 (1개)

[각 항목 상세 내역]
```

### 수정 가이드

```
================================
즉시 적용 가능한 수정 (2개)
================================

[각 수정 항목 Before/After]
```

---

## 주의사항

1. **구체적 피드백**: "좋다/나쁘다"가 아니라 "어디가 왜 어떻게"
2. **실행 가능**: 모호한 제안 금지, 구체적 수정안 필수
3. **우선순위**: 중요한 것부터, 시간 대비 효과 고려
4. **검증 가능**: 수정 후 개선 측정 가능하도록
5. **존중**: 비판적이되 건설적으로, 작성자 노력 인정

---

## 진행 추적 관리

### 중단된 검토 재개

진행 파일이 있으면 자동으로 재개 옵션 제공 (Phase 0 참조).

### 진행 파일 수동 삭제

사용자가 처음부터 다시 시작하고 싶은 경우:
```bash
rm {target-dir}/.docs-review-progress.md
```

### 진행 파일 보관

완료된 검토 결과를 보관하려면:
- `.docs-review-result.md`로 자동 이름 변경됨
- 수동 삭제 가능: `rm {target-dir}/.docs-review-result.md`

### 여러 문서 동시 검토

각 문서/디렉토리마다 독립적인 진행 파일 생성:
- `docs/feature-a/.docs-review-progress.md`
- `docs/feature-b/.docs-review-progress.md`

충돌 없음.
